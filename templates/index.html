<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/sidebar.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--Leaflet-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
     <!--Chart js-->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>
<body>
  <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
   

<div class="container-fluid">
    

  
      <div class="row">

      
        <div class="col-lg-2 position-fixed  " style="   height: 100%; background-color: #FFFFFF;">
            <div class="list-group" style="box-shadow: 2px 0 5px rgba(0, 0, 0, 0.2); height: 100%;">
              <div class="list-group-item" style="border-bottom: none;">

                
                <img src="/static/img/FLECO logo.png" class="img-thumbnail" alt="..." width="50">
                <a class="navbar-brand" href="#">FLECO</a>
            </div>
                <button type="button" style="color: white;" class="list-group-item list-group-item-action mt-4 bg-primary" aria-current="true">
                 <span class="fa fa-dashboard" style="margin-right: 8px; font-size: 20px;"></span>
             Dashboard
                </button>
                
                <button type="button" class="list-group-item list-group-item-action position-relative mt-3 ">
                   <span class="fa fa-list" style="margin-right: 8px; font-size: 20px ;"></span> Complaints
                   <span class="p-1 bg-primary border border-light rounded-circle " style="color: white;">
                    10+
    <span class="visually-hidden">New complaints</span>
  </span>
                </button>
                
                <button type="button" class="list-group-item list-group-item-action mt-3   ">
                  <span class="fa fa-history" style="margin-right: 10px; font-size: 22px;"></span> Complaints Tracking
                </button>
               
              </div>

        </div>

        <div class="container col-lg-10 offset-lg-2" style=" background-color: #F4F7FE; height: 100vh;">

            <div class="row mt-3">
              
              
                <!--Map-->   <div class=" col-lg-9 mb-3" style="height: 70vh;" id="map">
                </div>

                <div class="col-lg-3">
              <table class="table table-bordered border-primary">
                  <thead>
    <tr>
      <th scope="col">Areas</th>
      <th scope="col">Level of Prioritization</th>
    </tr>
  </thead>
    <tbody class="table-group-divider">
    <tr>
  
      <td>San Isidro</td>
      <td><div class="progress" role="progressbar" aria-label="Danger example" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
        <div class="progress-bar bg-danger" style="width: 100%"></div>
      </div></td>
    </tr>
    <tr>

      <td>asd</td>
      <td><div class="progress" role="progressbar" aria-label="Success example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
        <div class="progress-bar bg-success" style="width: 25%"></div>
      </div></td>
    </tr>
   

  </tbody>
  
            </table>
            <div style="width: 100%; text-align: end;"">
              <span class="text-primary ">view all</span>
            </div>
         
            
                </div>
            </div>

               

           
            <div class="row">
              <div class="card col-lg-12 mb-3" >
                  <div class="card-body">
                    <canvas id="complaintsChart" style="width:100%;"></canvas>
                  </div>
                </div>
            
                  <div class="card col-lg-12">
          
                    <div class="card-body" >
                      <canvas id="myChart"" style="width:100%;"></canvas>
                      
                    </div>
                
              
                  </div>
               
          </div>

            <div class="row">
              
            </div>
  
        
        </div>
    </div>
</div>

<!--Charts-->

  
 
<!--bootstrap-->
    <script src="/static/js/bootstrap.min.js"></script>
    <!--Leaflet-->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
     <script>
      var map = L.map('map').setView([14.2811, 121.4575], 15); // Center the map at San Isidro, Pagsanjan and zoom in

      // Add OpenStreetMap tile layer
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
      }).addTo(map);

      // Use AJAX to fetch complaints data from Flask route
      fetch('/complaints_data')
          .then(response => response.json())
          .then(data => {
            console.log('Complaints data:', data); // Log the fetched data
              data.forEach(complaint => {
              
                  if (complaint.latitude !== null && complaint.longitude !== null) {
                      // Add marker for the complaint location
                      var marker = L.marker([complaint.latitude, complaint.longitude]).addTo(map);
                      // Bind popup with complaint description
                      marker.bindPopup(complaint.complaint_description);
                  }
              });
          });
  </script>

      <!--Chart js--> <script src="/static/js/charts.js"></script>


</body>

</html>